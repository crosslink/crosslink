=How is Chinese/English crosslink table created?=

==Step 1:==

Mine the corpus with link_extract

1) get the Chinese lang links from English Wikipedia
{{{
link_extract -crosslink:zh -append-source-title -keep-anchor-intact /data/corpus/wikipedia/all/zh/pages/ > en2zh_lang_links.txt
/wikipedia/all/zh/pages > zh2en_lang_links.txt
}}}

2) get the English lang links from Chinese Wikipedia
{{{

link_extract -crosslink -append-source-title -keep-anchor-intact /data/corpus/wikipedia/all/zh/pages > zh2en_lang_links.txt

}}}

Note:
The link_extract code can be obtained from https://github.com/crosslink/Link-the-Wiki

==Step 2:==

split those tables and create a title-to-target only table.

{{{

create_crosslink_table.sh zh2en_lang_links.txt 1>zh2en_lang_links_E2C.txt 2>zh2en_lang_links_C2E.txt

}}}

{{{

}}}

Note:
create_crosslink_table.sh is available from:
https://code.google.com/p/crosslink/source/browse/trunk/CrosslinkMining/create_crosslink_table.sh

==Step 3:==

Merge those two tables together.

{{{

cat ../chinese/zh2en_lang_links_C2E.txt ../english/en2zh_lang_links_C2E.txt > lang_links_C2E_concate.txt

}}}


==Step 4:==

Option 1:

{{{

link_index lang_links_C2E_concate.txt -pagename -chinese > lang_links_C2E_indexed.txt

}}}

or

Option 2:

{{{
wc -l ../en-zh/zh2en_table.txt 
169974 ../en-zh/zh2en_table.txt

wc -l ../zh-en/zh2en_table.txt 
170637 ../zh-en/zh2en_table.txt

cat ../zh-en/zh2en_table.txt ../en-zh/zh2en_table.txt | awk -F : '{print $1":"$2}' | sort -n | uniq > both_zh2en_table_uniq.txt.2

cat ../zh-en/zh2en_table.txt | awk -F : '{print $1":"$2}' | sort -n | uniq > zh_corpus_zh2en_table.txt.2

cat both_zh2en_table_uniq.txt.2 zh_corpus_zh2en_table.txt.2 | sort -n | uniq -u > en_corpus_zh2en_table_uniq.txt.2

cat en_corpus_zh2en_table_uniq.txt.2 | while read line; do grep "^${line}:" ../en-zh/zh2en_table.txt ; done > en_corpus_zh2en_table_uniq.txt

cat ../zh-en/zh2en_table.txt en_corpus_zh2en_table_uniq.txt | sort -n | uniq > both_zh2en_table.txt
}}}

Now
{{{ 
tail both_zh2en_table.txt
}}}
*1306707:3940868:信譽系統
*1306805:1167798:大發 Fellow Max
*1307221:1714052:名古屋臨海高速鐵道西名古屋港線
*1307253:177066:全局唯一标识符
*1307253:27904751:全局唯一标识符
*1307280:11932713:我要唱下去
*1307315:22951462:奧罗奇语
*1307328:24466429:Music Bank
*1307328:24575041:Music Bank
*1307375:18205909:伏見車站 (愛知縣)